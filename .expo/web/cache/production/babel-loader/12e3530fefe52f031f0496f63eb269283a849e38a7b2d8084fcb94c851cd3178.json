{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import React,{useRef,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import Platform from\"react-native-web/dist/exports/Platform\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{LineChart}from'react-native-chart-kit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var html2canvas;if(Platform.OS==='web'){html2canvas=require('html2canvas');}var screenWidth=Dimensions.get('window').width;var screenHeight=Dimensions.get('window').height;var GraphCard=function GraphCard(_ref){var title=_ref.title,data=_ref.data,chartConfig=_ref.chartConfig,onIncrement=_ref.onIncrement,onDecrement=_ref.onDecrement;var chartRef=useRef(null);var defaultConfig={backgroundColor:'#FFFFFF',backgroundGradientFrom:'#FFFFFF',backgroundGradientTo:'#FFFFFF',decimalPlaces:2,color:function color(){var opacity=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return`rgba(0, 0, 0, ${opacity})`;},labelColor:function labelColor(){var opacity=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return`rgba(0, 0, 0, ${opacity})`;}};var downloadChart=function(){var _ref2=_asyncToGenerator(function*(){if(Platform.OS==='web'&&chartRef.current&&html2canvas){var canvas=yield html2canvas(chartRef.current);var dataURL=canvas.toDataURL('image/png');var link=document.createElement('a');link.download=`${title.replace(/\\s+/g,'_')}.png`;link.href=dataURL;document.body.appendChild(link);link.click();document.body.removeChild(link);}});return function downloadChart(){return _ref2.apply(this,arguments);};}();var combinedChartConfig=_objectSpread(_objectSpread({},defaultConfig),chartConfig);var renderControlButtons=function renderControlButtons(){return _jsx(View,{style:styles.controlsRow,children:data.labels.map(function(_,index){return _jsxs(View,{style:styles.controlsColumn,children:[_jsx(TouchableOpacity,{style:styles.controlButton,onPress:function onPress(){return onIncrement(index);},children:_jsx(Text,{style:styles.controlButtonText,children:\"+\"})}),_jsx(TouchableOpacity,{style:styles.controlButton,onPress:function onPress(){return onDecrement(index);},children:_jsx(Text,{style:styles.controlButtonText,children:\"-\"})})]},index);})});};return _jsxs(View,{style:styles.graphContainer,ref:chartRef,children:[_jsx(Text,{style:styles.title,children:title}),_jsx(LineChart,{data:data,width:screenWidth*0.28,height:screenHeight*0.22,chartConfig:combinedChartConfig,bezier:true}),Platform.OS==='web'&&_jsx(TouchableOpacity,{style:styles.downloadButton,onPress:downloadChart,children:_jsx(Text,{style:styles.downloadButtonText,children:\"Download\"})}),renderControlButtons()]});};var styles=StyleSheet.create({graphContainer:{alignItems:'center',backgroundColor:'#FFF',padding:16,borderRadius:8,shadowColor:'#000',shadowOffset:{width:0,height:3},shadowRadius:5,shadowOpacity:0.2,elevation:6,margin:10,position:'relative'},title:{fontSize:18,fontWeight:'bold',marginBottom:10},downloadButton:{position:'absolute',top:10,right:10,backgroundColor:'#062A52',padding:8,borderRadius:5},downloadButtonText:{color:'white',fontSize:14},intakeButtonsContainer:{flexDirection:'row',justifyContent:'space-around',position:'absolute',bottom:10,width:'100%',paddingLeft:24,paddingRight:24},intakeButton:{padding:4,backgroundColor:'blue',borderRadius:4},intakeButtonText:{color:'white',fontSize:12},controlButtonsContainer:{flexDirection:'row',justifyContent:'space-between',position:'absolute',bottom:10,left:10},controlsRow:{flexDirection:'row',justifyContent:'space-between',paddingTop:4},controlsColumn:{alignItems:'center',justifyContent:'center',marginHorizontal:19},controlButton:{backgroundColor:'#062A52',borderRadius:30,marginVertical:1,width:30,height:30,justifyContent:'center',alignItems:'center'},controlButtonText:{color:'white',fontSize:16}});export default GraphCard;","map":{"version":3,"names":["React","useRef","useEffect","View","Text","StyleSheet","Dimensions","Platform","TouchableOpacity","LineChart","jsx","_jsx","jsxs","_jsxs","html2canvas","OS","require","screenWidth","get","width","screenHeight","height","GraphCard","_ref","title","data","chartConfig","onIncrement","onDecrement","chartRef","defaultConfig","backgroundColor","backgroundGradientFrom","backgroundGradientTo","decimalPlaces","color","opacity","arguments","length","undefined","labelColor","downloadChart","_ref2","_asyncToGenerator","current","canvas","dataURL","toDataURL","link","document","createElement","download","replace","href","body","appendChild","click","removeChild","apply","combinedChartConfig","_objectSpread","renderControlButtons","style","styles","controlsRow","children","labels","map","_","index","controlsColumn","controlButton","onPress","controlButtonText","graphContainer","ref","bezier","downloadButton","downloadButtonText","create","alignItems","padding","borderRadius","shadowColor","shadowOffset","shadowRadius","shadowOpacity","elevation","margin","position","fontSize","fontWeight","marginBottom","top","right","intakeButtonsContainer","flexDirection","justifyContent","bottom","paddingLeft","paddingRight","intakeButton","intakeButtonText","controlButtonsContainer","left","paddingTop","marginHorizontal","marginVertical"],"sources":["C:/Users/Noah Marean/Source/Repos/TLT-1/EcoTracker/src/Components/GraphCard.js"],"sourcesContent":["// GraphCard.js\r\nimport React, { useRef, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, Dimensions, Platform, TouchableOpacity } from 'react-native';\r\nimport { LineChart } from 'react-native-chart-kit';\r\n\r\n// html2canvas is only needed for web, so ensure it's imported conditionally\r\nlet html2canvas;\r\nif (Platform.OS === 'web') {\r\n    html2canvas = require('html2canvas');\r\n}\r\n\r\nconst screenWidth = Dimensions.get('window').width;\r\nconst screenHeight = Dimensions.get('window').height;\r\n\r\nconst GraphCard = ({ title, data, chartConfig, onIncrement, onDecrement }) => {\r\n    // Ref for the chart container\r\n    const chartRef = useRef(null);\r\n\r\n    // Default chartConfig\r\n    const defaultConfig = {\r\n        backgroundColor: '#FFFFFF',\r\n        backgroundGradientFrom: '#FFFFFF',\r\n        backgroundGradientTo: '#FFFFFF',\r\n        decimalPlaces: 2, // specify the number of decimal places you want\r\n        color: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`, // make sure this is a function\r\n        labelColor: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`,\r\n\r\n    };\r\n\r\n    const downloadChart = async () => {\r\n        if (Platform.OS === 'web' && chartRef.current && html2canvas) {\r\n            const canvas = await html2canvas(chartRef.current);\r\n            const dataURL = canvas.toDataURL('image/png');\r\n            const link = document.createElement('a');\r\n            link.download = `${title.replace(/\\s+/g, '_')}.png`;\r\n            link.href = dataURL;\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n        }\r\n    };\r\n    const combinedChartConfig = { ...defaultConfig, ...chartConfig };\r\n\r\n\r\n    const renderControlButtons = () => (\r\n        <View style={styles.controlsRow}>\r\n            {data.labels.map((_, index) => (\r\n                <View key={index} style={styles.controlsColumn}>\r\n                    <TouchableOpacity\r\n                        style={styles.controlButton}\r\n                        onPress={() => onIncrement(index)}\r\n                    >\r\n                        <Text style={styles.controlButtonText}>+</Text>\r\n                    </TouchableOpacity>\r\n                    <TouchableOpacity\r\n                        style={styles.controlButton}\r\n                        onPress={() => onDecrement(index)}\r\n                    >\r\n                        <Text style={styles.controlButtonText}>-</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            ))}\r\n        </View>\r\n    );\r\n\r\n    return (\r\n        <View style={styles.graphContainer} ref={chartRef}>\r\n            <Text style={styles.title}>{title}</Text>\r\n            <LineChart\r\n                data={data}\r\n                width={screenWidth * 0.28} // Adjusted for demonstration\r\n                height={screenHeight * 0.22} // Adjusted for demonstration\r\n                chartConfig={combinedChartConfig}\r\n                bezier // This will make the line chart curved\r\n            />\r\n            {Platform.OS === 'web' && (\r\n                <TouchableOpacity style={styles.downloadButton} onPress={downloadChart}>\r\n                    <Text style={styles.downloadButtonText}>Download</Text>\r\n                </TouchableOpacity>\r\n            )}\r\n\r\n\r\n\r\n            {renderControlButtons()}\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    graphContainer: {\r\n        alignItems: 'center',\r\n        backgroundColor: '#FFF',\r\n        padding: 16,\r\n        borderRadius: 8,\r\n        shadowColor: '#000',\r\n        shadowOffset: { width: 0, height: 3 },\r\n        shadowRadius: 5,\r\n        shadowOpacity: 0.2,\r\n        elevation: 6,\r\n        margin: 10,\r\n        position: 'relative', // For positioning the download button\r\n    },\r\n    title: {\r\n        fontSize: 18,\r\n        fontWeight: 'bold',\r\n        marginBottom: 10,\r\n    },\r\n    downloadButton: {\r\n        position: 'absolute',\r\n        top: 10,\r\n        right: 10,\r\n        backgroundColor: '#062A52',\r\n        padding: 8,\r\n        borderRadius: 5,\r\n    },\r\n    downloadButtonText: {\r\n        color: 'white',\r\n        fontSize: 14,\r\n    },\r\n    intakeButtonsContainer: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-around',\r\n        position: 'absolute', // Positioning at the bottom of the graph\r\n        bottom: 10,\r\n        width: '100%',\r\n        paddingLeft: 24, // Padding to align with the graph content\r\n        paddingRight: 24,\r\n    },\r\n    intakeButton: {\r\n        padding: 4,\r\n        backgroundColor: 'blue',\r\n        borderRadius: 4,\r\n    },\r\n    intakeButtonText: {\r\n        color: 'white',\r\n        fontSize: 12,\r\n    },\r\n    controlButtonsContainer: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        position: 'absolute',\r\n        bottom: 10,\r\n        left: 10,\r\n    },\r\n    controlsRow: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        paddingTop: 4,\r\n    },\r\n    controlsColumn: {\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        marginHorizontal: 19,\r\n    },\r\n    controlButton: {\r\n        backgroundColor: '#062A52',\r\n        borderRadius: 30,\r\n        marginVertical: 1,\r\n        width: 30,\r\n        height: 30,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    },\r\n    controlButtonText: {\r\n        color: 'white',\r\n        fontSize: 16,\r\n    },\r\n});\r\n\r\nexport default GraphCard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}