{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import React,{useState,useEffect}from\"react\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import Image from\"react-native-web/dist/exports/Image\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import Animated from\"react-native-web/dist/exports/Animated\";import Easing from\"react-native-web/dist/exports/Easing\";import Button from\"react-native-web/dist/exports/Button\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Alert from\"react-native-web/dist/exports/Alert\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import styles from\"../Styles/LogInStyles\";import Footer from\"../Footer\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PasswordReset(){var _useState=useState(new Animated.Value(1)),_useState2=_slicedToArray(_useState,1),scaleValue=_useState2[0];useEffect(function(){var pulseAnimation=Animated.sequence([Animated.timing(scaleValue,{toValue:1.07,duration:1500,easing:Easing.ease,useNativeDriver:true}),Animated.timing(scaleValue,{toValue:1,duration:1500,easing:Easing.ease,useNativeDriver:true})]);Animated.loop(pulseAnimation).start();},[scaleValue]);var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),passwordConfirm=_useState8[0],setPasswordConfirm=_useState8[1];var handleLogin=function(){var _ref=_asyncToGenerator(function*(){try{var response=yield axios({method:'POST',url:'http://localhost:5000/changepassword',headers:{'Content-Type':'application/json'},data:{email:email,password:password}});if(response.data.success){navigation.navigate('UserAccount');}else{alert(\"Change Password Failed\",response.data.error||\"An unknown error occurred.\");}}catch(error){var _error$response,_error$response$data;console.error(error);alert(\"Change Password Error\",((_error$response=error.response)==null?void 0:(_error$response$data=_error$response.data)==null?void 0:_error$response$data.error)||\"An error occurred during the password change, please try again.\");}});return function handleLogin(){return _ref.apply(this,arguments);};}();var handleSubmit=function handleSubmit(e){e.preventDefault();if(password===passwordConfirm){handleLogin();navigation.navigate('UserAccount');console.log('Passwords match. Proceed with the next steps.');}else{alert('Passwords do not match. Please try again.');}};return _jsxs(ImageBackground,{source:require(\"../../../assets/ecoBackground.png\"),style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh'},children:[_jsx(Image,{source:require(\"../../../assets/ecoSun.png\"),style:{width:300,height:300,position:'absolute',bottom:0}}),_jsx(Animated.Image,{source:require(\"../../../assets/ecoTrackLogosu.png\"),style:[styles.logo,{transform:[{scale:scaleValue}]}]}),_jsxs(View,{style:_objectSpread(_objectSpread({},styles.container),{},{marginBottom:100}),children:[_jsx(TextInput,{style:_objectSpread(_objectSpread({},styles.input),{},{fontSize:18}),placeholder:\"Email\",value:email,onChangeText:function onChangeText(text){return setEmail(text);},autoCapitalize:\"none\"}),_jsx(TextInput,{style:_objectSpread(_objectSpread({},styles.input),{},{fontSize:18}),placeholder:\"Password\",value:password,onChangeText:function onChangeText(text){return setPassword(text);},secureTextEntry:true,autoCapitalize:\"none\"}),_jsx(TextInput,{style:_objectSpread(_objectSpread({},styles.input),{},{fontSize:18}),placeholder:\"Confirm Password\",value:passwordConfirm,onChangeText:function onChangeText(text){return setPasswordConfirm(text);},secureTextEntry:true,autoCapitalize:\"none\"}),_jsx(TouchableOpacity,{style:styles.button,onPress:handleSubmit,children:_jsx(Text,{style:styles.buttonText,children:\"Change Password\"})})]}),_jsx(Footer,{style:{height:18},navigation:navigation})]});}export default PasswordReset;","map":{"version":3,"names":["React","useState","useEffect","StyleSheet","Text","View","Image","ImageBackground","Animated","Easing","Button","TextInput","Alert","Dimensions","TouchableOpacity","styles","Footer","axios","jsx","_jsx","jsxs","_jsxs","PasswordReset","_useState","Value","_useState2","_slicedToArray","scaleValue","pulseAnimation","sequence","timing","toValue","duration","easing","ease","useNativeDriver","loop","start","_useState3","_useState4","email","setEmail","_useState5","_useState6","password","setPassword","_useState7","_useState8","passwordConfirm","setPasswordConfirm","handleLogin","_ref","_asyncToGenerator","response","method","url","headers","data","success","navigation","navigate","alert","error","_error$response","_error$response$data","console","apply","arguments","handleSubmit","e","preventDefault","log","source","require","style","display","justifyContent","alignItems","height","children","width","position","bottom","logo","transform","scale","_objectSpread","container","marginBottom","input","fontSize","placeholder","value","onChangeText","text","autoCapitalize","secureTextEntry","button","onPress","buttonText"],"sources":["C:/Users/Noah Marean/Source/Repos/TLT-1/EcoTracker/src/Components/pages/PasswordReset.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { StyleSheet, Text, View, Image, ImageBackground, Animated, Easing, Button, TextInput, Alert, Dimensions, TouchableOpacity } from \"react-native\";\r\nimport styles from \"../Styles/LogInStyles\";\r\nimport Footer from '../Footer';\r\nimport axios from 'axios';\r\n\r\nfunction PasswordReset() {\r\n    const [scaleValue] = useState(new Animated.Value(1));\r\n\r\n    useEffect(() => {\r\n        const pulseAnimation = Animated.sequence([\r\n            Animated.timing(scaleValue, {\r\n                toValue: 1.07,\r\n                duration: 1500,\r\n                easing: Easing.ease,\r\n                useNativeDriver: true,\r\n            }),\r\n            Animated.timing(scaleValue, {\r\n                toValue: 1,\r\n                duration: 1500,\r\n                easing: Easing.ease,\r\n                useNativeDriver: true,\r\n            }),\r\n        ]);\r\n\r\n        Animated.loop(pulseAnimation).start();\r\n    }, [scaleValue]);\r\n\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [passwordConfirm, setPasswordConfirm] = useState('');\r\n    //console.log(username, password)\r\n\r\n    const handleLogin = async () => {\r\n        try {\r\n            const response = await axios({\r\n                method: 'POST',\r\n                url: 'http://localhost:5000/changepassword',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                data: {\r\n                    email: email,\r\n                    password: password,\r\n                }\r\n            });\r\n\r\n            if (response.data.success) {\r\n                // If password change is successful, navigate to the Title screen\r\n                navigation.navigate('UserAccount');\r\n            } else {\r\n                // If the change is not successful, show an alert with the provided error message or a default message\r\n                alert(\"Change Password Failed\", response.data.error || \"An unknown error occurred.\");\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            // If there is an error in making the request, show an alert with the error message\r\n            alert(\"Change Password Error\", error.response?.data?.error || \"An error occurred during the password change, please try again.\");\r\n        }\r\n    };\r\n\r\n\r\n    //handleLogin();\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault(); // Prevents the default form submit action\r\n\r\n        // Check if passwords match\r\n        if (password === passwordConfirm) {\r\n            // Proceed with the login or registration process\r\n           // navigation.navigate('UserAccount');\r\n            handleLogin();\r\n            navigation.navigate('UserAccount');\r\n\r\n            console.log('Passwords match. Proceed with the next steps.');\r\n        } else {\r\n            // If passwords don't match, alert the user\r\n            alert('Passwords do not match. Please try again.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <ImageBackground\r\n            source={require(\"../../../assets/ecoBackground.png\")}\r\n            style={{\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n                height: '100vh', // full viewport height\r\n            }}\r\n        >\r\n            <Image source={require(\"../../../assets/ecoSun.png\")}\r\n                style={{\r\n                    width: 300,\r\n                    height: 300,\r\n                    position: 'absolute',\r\n                    bottom: 0\r\n                }} />\r\n            <Animated.Image\r\n                source={require(\"../../../assets/ecoTrackLogosu.png\")}\r\n                style={[styles.logo, { transform: [{ scale: scaleValue }] }]}\r\n            />\r\n            <View style={{ ...styles.container, marginBottom: 100 }}>\r\n                <TextInput\r\n                    style={{ ...styles.input, fontSize: 18 }}\r\n                    placeholder=\"Email\"\r\n                    value={email}\r\n                    onChangeText={text => setEmail(text)}\r\n                    autoCapitalize=\"none\"\r\n                />\r\n                <TextInput\r\n                    style={{ ...styles.input, fontSize: 18 }}\r\n                    placeholder=\"Password\"\r\n                    value={password}\r\n                    onChangeText={text => setPassword(text)}\r\n                    secureTextEntry={true}\r\n                    autoCapitalize=\"none\"\r\n                />\r\n                <TextInput\r\n                    style={{ ...styles.input, fontSize: 18 }}\r\n                    placeholder=\"Confirm Password\"\r\n                    value={passwordConfirm}\r\n                    onChangeText={text => setPasswordConfirm(text)}\r\n                    secureTextEntry={true}\r\n                    autoCapitalize=\"none\"\r\n                />\r\n                <TouchableOpacity\r\n                    style={styles.button}\r\n                    onPress={handleSubmit}\r\n                >\r\n                    <Text style={styles.buttonText}>Change Password</Text>\r\n                </TouchableOpacity>\r\n\r\n            </View>\r\n\r\n\r\n            \r\n            <Footer style={{ height: 18 }} navigation={navigation} />\r\n        </ImageBackground >\r\n\r\n    );\r\n}\r\nexport default PasswordReset;\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}